<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		
	    
	    
	
	
	<title>Google Analytics Tracking of JetPack (Sharedaddy) Social Engagement
 &raquo; Benjamin J. Balter</title>
	<meta property='og:title' content='Google Analytics Tracking of JetPack (Sharedaddy) Social Engagement
 &raquo; Benjamin J. Balter'/>

	<meta property='og:site_name' content='Benjamin J. Balter'/>
	
	
	<meta name="description" content="Google recently added social engagement tracking to its analytics suite. With a little bit of leg work, Google Analytics can track not only +1s, but also Facebook and Twitter shares via a simple _gaq.push call.
"/>
	<meta property='og:description' content='Google recently added social engagement tracking to its analytics suite. With a little bit of leg work, Google Analytics can track not only +1s, but also Facebook and Twitter shares via a simple _gaq.push call.
'/>
	
	
	
	
	<link rel="canonical" href="http://localhost:4000/2011/06/30/google-analytics-tracking-of-jetpack-sharedaddy-social-engagement/" />

	<link rel="next" href="http://localhost:4000/2011/08/29/wp-document-revisions-document-management-version-control-wordpress/" title="WP Document Revisions -- Document Management & Version Control for WordPress" />
	<link rel="prev" href="http://localhost:4000/2011/06/16/groupon-and-livingsocial/" title="Groupon and LivingSocial: a Limited-Time Offer" />

	<meta property='og:url' content='http://localhost:4000/2011/06/30/google-analytics-tracking-of-jetpack-sharedaddy-social-engagement/'/>
	<link rel="alternate" type="application/rss+xml" title="Benjamin J. Balter &raquo; Feed" href="" />
	
	<meta property='og:locale' content='en_us'/>


	<meta name="viewport" content="width=device-width">

	<link rel="stylesheet" href="http://localhost:4000/assets/css/style.css">
	<script src="http://localhost:4000/assets/js/modernizr-2.5.3-respond-1.1.0.min.js"></script>
</head>
<body class="default post-2011-06-30-google-analytics-tracking-of-jetpack-sharedaddy-social-engagement">
<!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->

		<div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Benjamin J. Balter</a>
          <div class="nav-collapse">
	        	<ul class="nav" role="menu">
		<li id="home" ><a href="http://localhost:4000">Home</a>
	
		<li id="/resume" ><a href="http://localhost:4000/resume/">Resume</a></li>
		
		<li id="/fine-print" ><a href="http://localhost:4000/fine-print/">Fine Print</a></li>
		
		<li id="/donate" ><a href="http://localhost:4000/donate/">Donate</a></li>
		
		<li id="/contact" ><a href="http://localhost:4000/contact/">Contact</a></li>
		
		<li id="/about" ><a href="http://localhost:4000/about/">About</a></li>
		
	</ul>

          </div>
        </div>
      </div>
    </div>

<div class="container-fluid">

<header>
	<div class="row-fluid">
    	<div class="span12">
        	<div class="hero-unit">
            	<h1 role="banner"><a href="http://localhost:4000">Benjamin J. Balter</a></h1>
            	<h2 class="description">J.D./M.B.A. Candidate, Open-Source Developer, Gov 2.0 Evangelist</h2>
            </div>
        </div>
    </div>
</header>

<div class="content">
	<div class="row-fluid">
		<div class="span2">&nbsp;</div>
		<div class="span8">
			<article id="post-2011-06-30-google-analytics-tracking-of-jetpack-sharedaddy-social-engagement" class="post post-2011-06-30-google-analytics-tracking-of-jetpack-sharedaddy-social-engagement">
	<h2 class="title"><a href="http://localhost:4000/2011/06/30/google-analytics-tracking-of-jetpack-sharedaddy-social-engagement/">Google Analytics Tracking of JetPack (Sharedaddy) Social Engagement
</a></h2> 

	<div class="post-meta">
		<span class="entry-date">Posted on June 30, 2011</span> 
		<span class="entry-author">by Benjamin J. Balter</span>
	</div>
	    
    <div class="entrybody">
      <p>Google recently added <a href='http://mashable.com/2011/06/30/google-analytics-social-plugin/'>social engagement tracking</a> to its analytics suite. With a little bit of leg work, Google Analytics can track not only +1s, but also Facebook and Twitter shares via a simple <code>_gaq.push</code> call.</p>

<p>If your site uses WordPress&#8217;s JetPack plugin with Sharedaddy, and you already have <a href='http://yoast.com/wordpress/google-analytics/'>Google Analytics</a> up and running, you can use jQuery to attach the virtual event to the share button.</p>

<p>To add Google Analytics to Sharedaddy&#8217;s Twitter share button:</p>

<pre><code>$(&#39;a.share-twitter&#39;).click( function() {
_gaq.push( [&#39;_trackSocial&#39;, &#39;twitter&#39;, &#39;share&#39;,
$(this).attr(&#39;href&#39;).substr(0, $(this).attr(&#39;href&#39;).indexOf(&#39;?&#39;))]);
});</code></pre>

<p>â€¦and for Facebook:</p>

<pre><code>$(&#39;a.share-facebook&#39;).click( function() {
_gaq.push( [&#39;_trackSocial&#39;, &#39;faceboook&#39;, &#39;share&#39;,
$(this).attr(&#39;href&#39;).substr(0, $(this).attr(&#39;href&#39;).indexOf(&#39;?&#39;))]);
});</code></pre>

<p>The above code simply listens for the share button to be clicked, and if so, passes the target URL back to Google, along with the service&#8217;s name. Putting it all together into a plugin with a hook to <code>&lt;del&gt;wp_head&lt;/del&gt; wp_footer</code> you get:</p>

<pre><code>&amp;lt;?php
/**
 * Plugin Name: Jetpack (Sharedaddy) Google Analytics Tracking
 * Description: Allows tracking of Facebook and Twitter shares in Google Analytics Social Tracking
 * Author: Benjamin J. Balter
 * Author URI:  http://ben.balter.com
 * Version: 0.1
 */

 /**
  * Outputs javascript to document footer
  */
function bb_ga_social_footer() { ?&amp;gt;

&amp;lt;script&amp;gt;
	jQuery(document).ready(function($) {

		//twitter
		$(&#39;a.share-twitter&#39;).click(function(){
		_gaq.push( [&#39;_trackSocial&#39;, &#39;twitter&#39;, &#39;share&#39;,
		$(this).attr(&#39;href&#39;).substr(0, 	$(this).attr(&#39;href&#39;).indexOf(&#39;?&#39;))]);
		});

		//facebook
		$(&#39;a.share-facebook&#39;).click( function() {
		_gaq.push( [&#39;_trackSocial&#39;, &#39;faceboook&#39;, &#39;share&#39;,
		$(this).attr(&#39;href&#39;).substr(0, $(this).attr(&#39;href&#39;).indexOf(&#39;?&#39;))]);
		});

	});
&amp;lt;/script&amp;gt;

&amp;lt;?php }

//add our hook with higher-than-default priority
add_action(&#39;wp_footer&#39;, &#39;bb_ga_social_footer&#39;, 20)

/**
 * Require WP to load jQuery if not already loaded
 * h/t @Ramoonus
 */
function bb_ga_social_enqueue() {
	wp_enqueue_script(&amp;quot;jquery&amp;quot;);
}

//add hook to enqueue jQuery on load
add_action(&#39;init&#39;, &#39;bb_ga_social_enqueue&#39;);
?&amp;gt;</code></pre>

<p>The code should work out of the box with the standard share buttons (seen below), but can easily be adapted with a few minor modifications to apply to like and other iterations of the social media icons.</p>

<p>More details on the tracking code can be found over in the <a href='http://code.google.com/apis/analytics/docs/tracking/gaTrackingSocial.html'>Google Analytics Social Engagement Documentation</a>. Improve the code to work with your site? Feel free to <a href='https://gist.github.com/1058469'>fork the gist</a> and contribute it back.</p>

<p><strong>Update:</strong> Dedicated reader All-around rabble-rouser <a href='http://andrewnacin.com'>Andrew Nacin</a> points out that by default, jQuery is queued up into the footer. Updated the above code to hook into <code>wp_footer</code> with a priority of 20 (higher than jQuery&#8217;s 10 hook).</p>

<p><strong>Update:</strong>Special thanks to <a href='http://twitter.com/Ramoonus'>@Ramoonus</a> for <a href='https://gist.github.com/1058469/db96b6836f279811205bddbf8be67bec6ca2159c'>didn&#8217;t queue up jQuery</a>.</p>
    </div>
    
    <div class="post-taxonomies">
  		Posted in 

<span class="term-list term-list-categories"><a href="http://localhost:4000/categories/#posts">posts</a></span> |
		Tagged 

<span class="term-list term-list-tags"><a href="http://localhost:4000/tags/#analytics">analytics</a>, <a href="http://localhost:4000/tags/#facebook">facebook</a>, <a href="http://localhost:4000/tags/#google">google</a>, <a href="http://localhost:4000/tags/#open source">open source</a>, <a href="http://localhost:4000/tags/#plugin">plugin</a>, <a href="http://localhost:4000/tags/#social media">social media</a>, <a href="http://localhost:4000/tags/#twitter">twitter</a>, <a href="http://localhost:4000/tags/#wordpress">wordpress</a></span>		
    </div>
</article>
		</div>
	</div>
</div>




     <footer>
        <p>&copy; Company 2012</p>
      </footer>
      
     </div><!--/.fluid-container-->
           
<!--	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="http://localhost:4000/javascript/jquery.js"><\/script>')</script>
	<script src="js/underscore.js"></script>
	<script src="js/backbone.js"></script>
	<script src="js/app.js"></script>
	<script src="http://localhost:4000/assets/js/js.js"></script> -->
	<script data-main="js/main.js" src="http://localhost:4000/js/libs/require/require.js"></script>
	<script>
	var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
	(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
	g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
	s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
</body>
</html>
<!-- Generated 2012-09-04 23:34:58 -0400 -->