<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		
	    
	    
	
	
	<title>Google Analytics Tracking of JetPack (Sharedaddy) Social Engagement
 &raquo; Benjamin J. Balter</title>
	<meta property='og:title' content='Google Analytics Tracking of JetPack (Sharedaddy) Social Engagement
 &raquo; Benjamin J. Balter'/>

	<meta property='og:site_name' content='Benjamin J. Balter'/>
	
	
	<meta name="description" content="Google recently added social engagement tracking to its analytics suite. With a little bit of leg work, Google Analytics can track not only +1s, but also Facebook and Twitter shares via a simple _gaq.push call.
"/>
	<meta property='og:description' content='Google recently added social engagement tracking to its analytics suite. With a little bit of leg work, Google Analytics can track not only +1s, but also Facebook and Twitter shares via a simple _gaq.push call.
'/>
	
	
	
	
	<link rel="canonical" href="http://localhost:4000/2011/06/30/google-analytics-tracking-of-jetpack-sharedaddy-social-engagement/" />

	<link rel="next" href="http://localhost:4000/2011/08/29/wp-document-revisions-document-management-version-control-wordpress/" title="WP Document Revisions -- Document Management & Version Control for WordPress" />
	<link rel="prev" href="http://localhost:4000/2011/06/16/groupon-and-livingsocial/" title="Groupon and LivingSocial: a Limited-Time Offer" />

	<meta property='og:url' content='http://localhost:4000/2011/06/30/google-analytics-tracking-of-jetpack-sharedaddy-social-engagement/'/>
	<link rel="alternate" type="application/rss+xml" title="Benjamin J. Balter &raquo; Feed" href="" />
	
	<meta property='og:locale' content='en_us'/>


	<meta name="viewport" content="width=device-width">

	<link rel="stylesheet" href="http://localhost:4000/assets/css/style.css">
	<script src="http://localhost:4000/assets/js/modernizr-2.5.3-respond-1.1.0.min.js"></script>
</head>
<body class="post post-2011-06-30-google-analytics-tracking-of-jetpack-sharedaddy-social-engagement">
<!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->

		<div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Benjamin J. Balter</a>
          <div class="nav-collapse">
	        	<ul class="nav" role="menu">
		<li id="home" ><a href="http://localhost:4000">Home</a>
	
		<li id="7" ><a href="http://localhost:4000/about.html">About</a></li>
		
		<li id="" ><a href="http://localhost:4000/categories/">Categories</a></li>
		
		<li id="10" ><a href="http://localhost:4000/contact.html">Contact</a></li>
		
		<li id="1931" ><a href="http://localhost:4000/donate.html">Donate</a></li>
		
		<li id="462" ><a href="http://localhost:4000/fine-print.html">Fine Print</a></li>
		
		<li id="12" ><a href="http://localhost:4000/resume.html">Resume</a></li>
		
		<li id="" ><a href="http://localhost:4000/tags/">Tags</a></li>
		
	</ul>

          </div>
        </div>
      </div>
    </div>

<div class="container-fluid">

<header>
	<div class="row-fluid">
    	<div class="span12">
        	<div class="hero-unit">
            	<h1 role="banner"><a href="http://localhost:4000">Benjamin J. Balter</a></h1>
            	<h2 class="description">J.D./M.B.A. Candidate, Open-Source Developer, Gov 2.0 Evangelist</h2>
            </div>
        </div>
    </div>
</header>

<article id="post-2011-06-30-google-analytics-tracking-of-jetpack-sharedaddy-social-engagement" class="post post-2011-06-30-google-analytics-tracking-of-jetpack-sharedaddy-social-engagement">
	<h2 class="title"><a href="http://localhost:4000/2011/06/30/google-analytics-tracking-of-jetpack-sharedaddy-social-engagement/">Google Analytics Tracking of JetPack (Sharedaddy) Social Engagement
</a></h2> 

	<div class="post-meta">
		<span class="entry-date">Posted on June 30, 2011</span> 
		<span class="entry-author">by Benjamin J. Balter</span>
	</div>
	    
    <div class="entrybody">
      Google recently added [social engagement tracking][1] to its analytics suite. With a little bit of leg work, Google Analytics can track not only +1s, but also Facebook and Twitter shares via a simple `_gaq.push` call.

If your site uses WordPress’s JetPack plugin with Sharedaddy, and you already have [Google Analytics][2] up and running, you can use jQuery to attach the virtual event to the share button.

<!--more-->

To add Google Analytics to Sharedaddy’s Twitter share button:

<pre class="brush: jscript; title: ; notranslate" title="">$('a.share-twitter').click( function() {
_gaq.push( ['_trackSocial', 'twitter', 'share',
$(this).attr('href').substr(0, $(this).attr('href').indexOf('?'))]);
});
</pre>

…and for Facebook:

<pre class="brush: jscript; title: ; notranslate" title="">$('a.share-facebook').click( function() {
_gaq.push( ['_trackSocial', 'faceboook', 'share',
$(this).attr('href').substr(0, $(this).attr('href').indexOf('?'))]);
});
</pre>

The above code simply listens for the share button to be clicked, and if so, passes the target URL back to Google, along with the service’s name. Putting it all together into a plugin with a hook to `<del>wp_head</del> wp_footer` you get:

<pre class="brush: php; title: ; notranslate" title="">&lt;?php
/**
 * Plugin Name: Jetpack (Sharedaddy) Google Analytics Tracking
 * Description: Allows tracking of Facebook and Twitter shares in Google Analytics Social Tracking
 * Author: Benjamin J. Balter
 * Author URI:  http://ben.balter.com
 * Version: 0.1
 */

 /**
  * Outputs javascript to document footer
  */
function bb_ga_social_footer() { ?&gt;

&lt;script&gt;
	jQuery(document).ready(function($) {

		//twitter
		$('a.share-twitter').click(function(){
		_gaq.push( ['_trackSocial', 'twitter', 'share',
		$(this).attr('href').substr(0, 	$(this).attr('href').indexOf('?'))]);
		});

		//facebook
		$('a.share-facebook').click( function() {
		_gaq.push( ['_trackSocial', 'faceboook', 'share',
		$(this).attr('href').substr(0, $(this).attr('href').indexOf('?'))]);
		});

	});
&lt;/script&gt;

&lt;?php }

//add our hook with higher-than-default priority
add_action('wp_footer', 'bb_ga_social_footer', 20)

/**
 * Require WP to load jQuery if not already loaded
 * h/t @Ramoonus
 */
function bb_ga_social_enqueue() {
	wp_enqueue_script(&quot;jquery&quot;);
}

//add hook to enqueue jQuery on load
add_action('init', 'bb_ga_social_enqueue');
?&gt;
</pre>

The code should work out of the box with the standard share buttons (seen below), but can easily be adapted with a few minor modifications to apply to like and other iterations of the social media icons.

More details on the tracking code can be found over in the [Google Analytics Social Engagement Documentation][3]. Improve the code to work with your site? Feel free to [fork the gist][4] and contribute it back.

**Update:** <del>Dedicated reader</del> All-around rabble-rouser [Andrew Nacin][5] points out that by default, jQuery is queued up into the footer. Updated the above code to hook into `wp_footer` with a priority of 20 (higher than jQuery’s 10 hook).

**Update:**Special thanks to [@Ramoonus][6] for [didn’t queue up jQuery][7].

 [1]: http://mashable.com/2011/06/30/google-analytics-social-plugin/
 [2]: http://yoast.com/wordpress/google-analytics/
 [3]: http://code.google.com/apis/analytics/docs/tracking/gaTrackingSocial.html
 [4]: https://gist.github.com/1058469
 [5]: http://andrewnacin.com
 [6]: http://twitter.com/Ramoonus
 [7]: https://gist.github.com/1058469/db96b6836f279811205bddbf8be67bec6ca2159c
    </div>
    
    <div class="post-taxonomies">
  		Posted in 

<span class="term-list term-list-categories"><a href="http://localhost:4000/categories/#["technology"]">Technology</a></span> |
		Tagged 

<span class="term-list term-list-tags"></span>		
    </div>
</article>



     <footer>
        <p>&copy; Company 2012</p>
      </footer>
      
     </div><!--/.fluid-container-->
           
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="http://localhost:4000/javascript/jquery.js"><\/script>')</script>
	<script src="http://localhost:4000/assets/js/js.js"></script>
	<script>
	var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
	(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
	g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
	s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
</body>
</html>
<!-- Generated 2012-08-18 17:27:47 -0400 -->