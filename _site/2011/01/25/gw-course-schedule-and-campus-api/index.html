<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		
	    
	    
	
	
	<title>GW Course Schedule and Campus API &raquo; Benjamin J. Balter</title>
	<meta property='og:title' content='GW Course Schedule and Campus API &raquo; Benjamin J. Balter'/>

	<meta property='og:site_name' content='Benjamin J. Balter'/>
	
	
	<meta name="description" content="George Washington University recently released an iPhone app that allows students to look up the course schedule and each course's open/closed status as well as browse an interactive map of the campus. Below you can find the details on GW's course schedule and campus map API endpoints, as well as an API wrapper to interact with it written in PHP."/>
	<meta property='og:description' content='George Washington University recently released an iPhone app that allows students to look up the course schedule and each course's open/closed status as well as browse an interactive map of the campus. Below you can find the details on GW's course schedule and campus map API endpoints, as well as an API wrapper to interact with it written in PHP.'/>
	
	
	
	
	<link rel="canonical" href="http://localhost:4000/2011/01/25/gw-course-schedule-and-campus-api/" />

	<link rel="next" href="http://localhost:4000/2011/02/03/a-site-by-any-other-name/" title="A Site By Any Other Name..." />
	<link rel="prev" href="http://localhost:4000/2011/01/11/wordpress-emphasis-plugin/" title="WordPress Emphasis Plugin: Highlight and Permalink Text" />

	<meta property='og:url' content='http://localhost:4000/2011/01/25/gw-course-schedule-and-campus-api/'/>
	<link rel="alternate" type="application/rss+xml" title="Benjamin J. Balter &raquo; Feed" href="" />
	
	<meta property='og:locale' content='en_us'/>


	<meta name="viewport" content="width=device-width">

	<link rel="stylesheet" href="http://localhost:4000/assets/css/style.css">
	<script src="http://localhost:4000/assets/js/modernizr-2.5.3-respond-1.1.0.min.js"></script>
</head>
<body class="default post-2011-01-25-gw-course-schedule-and-campus-api">
<!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->

		<div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">Benjamin J. Balter</a>
          <div class="nav-collapse">
	        	<ul class="nav" role="menu">
		<li id="home" ><a href="http://localhost:4000">Home</a>
	
		<li id="/resume" ><a href="http://localhost:4000/resume/">Resume</a></li>
		
		<li id="/fine-print" ><a href="http://localhost:4000/fine-print/">Fine Print</a></li>
		
		<li id="/donate" ><a href="http://localhost:4000/donate/">Donate</a></li>
		
		<li id="/contact" ><a href="http://localhost:4000/contact/">Contact</a></li>
		
		<li id="/about" ><a href="http://localhost:4000/about/">About</a></li>
		
	</ul>

          </div>
        </div>
      </div>
    </div>

<div class="container-fluid">

<header>
	<div class="row-fluid">
    	<div class="span12">
        	<div class="hero-unit">
            	<h1 role="banner"><a href="http://localhost:4000">Benjamin J. Balter</a></h1>
            	<h2 class="description">J.D./M.B.A. Candidate, Open-Source Developer, Gov 2.0 Evangelist</h2>
            </div>
        </div>
    </div>
</header>

<div class="content">
	<div class="row-fluid">
		<div class="span2">&nbsp;</div>
		<div class="span8">
			<article id="post-2011-01-25-gw-course-schedule-and-campus-api" class="post post-2011-01-25-gw-course-schedule-and-campus-api">
	<h2 class="title"><a href="http://localhost:4000/2011/01/25/gw-course-schedule-and-campus-api/">GW Course Schedule and Campus API</a></h2> 

	<div class="post-meta">
		<span class="entry-date">Posted on January 25, 2011</span> 
		<span class="entry-author">by Benjamin J. Balter</span>
	</div>
	    
    <div class="entrybody">
      <p><img alt='' src='http://ben.balter.com/wp-content/uploads/2011/01/1430289931_beb7ff6428_b-300x225.jpg' />George Washington University recently released an <a href='http://acadtech.gwu.edu/pages/gwmobile'>iPhone app</a> that allows students to look up the course schedule and each course&#8217;s open/closed status as well as browse an interactive map of the campus. Naturally, upon installing the app, the first thing to do is to try and ferret out the underlying XML API that powers it, a simple enough task given <a href='http://blog.jerodsanto.net/2009/06/sniff-your-iphones-network-traffic/'>the right tools</a>.</p>

<p>Below you can find the details on GW&#8217;s course schedule and campus map API endpoints, as well as an API wrapper to interact with it written in PHP. Feel free to grab the code below, or fork and contribute in the <a href='https://github.com/benbalter/GW-API'>GitHub repo</a>. Cool data that deserves to be shared with the world, no doubt.</p>

<p>Creative ideas on how best to leverage the information welcome in the <a href='#comments'>comments below</a>.</p>

<p><em>Please Note: I am not a GW employee, nor is use of the API explicitly authorized by the University. The code below is provided &#8220;as is&#8221; solely for educational purposes. If for any reason you would like this page removed, please <a href='http://ben.balter.com/contact/'>contact me</a> immediately and I will do so.</em></p>
<hr />
<h2 id='course_schedule'>Course Schedule</h2>

<ol>
<li>
<p>Departments 1. Endpoint 1. <code>http://my.gwu.edu/mod/pws/scheduleXML.cfm</code> 2. Parameters 1. <code>termCode=[YYYY][01=spring, 02=summer, 03=fall]</code> 3. Returns</p>

<pre><code>&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;iso-8859-1&amp;quot; ?&amp;gt;
&amp;lt;departments&amp;gt;
    &amp;lt;department&amp;gt;
        &amp;lt;departmentcode&amp;gt;&amp;lt;![CDATA[ACCY]]&amp;gt;&amp;lt;/departmentcode&amp;gt;
        &amp;lt;departmentname&amp;gt;&amp;lt;![CDATA[Accountancy]]&amp;gt;&amp;lt;/departmentname&amp;gt;
    &amp;lt;/department&amp;gt;
    &amp;lt;department&amp;gt;
        &amp;lt;departmentcode&amp;gt;&amp;lt;![CDATA[AH]]&amp;gt;&amp;lt;/departmentcode&amp;gt;
        &amp;lt;departmentname&amp;gt;&amp;lt;![CDATA[Art/Art History]]&amp;gt;&amp;lt;/departmentname&amp;gt;
    &amp;lt;/department&amp;gt;
&amp;lt;/departments&amp;gt;</code></pre>
</li>

<li>
<p>Courses 1. Endpoint 1. <code>http://my.gwu.edu/mod/pws/scheduleXML.cfm</code> 2. Parameters 1. <code>termCode=[YYYY][01=spring, 02=summer, 03=fall]</code> 2. <code>deptCode=[Dept. Code]</code> 3. Returns</p>

<pre><code>&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;iso-8859-1&amp;quot; ?&amp;gt;
	&amp;lt;courses&amp;gt;
		&amp;lt;course&amp;gt;
		    &amp;lt;coursedepartment&amp;gt;&amp;lt;![CDATA[ACCY]]&amp;gt;&amp;lt;/coursedepartment&amp;gt;
		    &amp;lt;coursenumber&amp;gt;&amp;lt;![CDATA[6101]]&amp;gt;&amp;lt;/coursenumber&amp;gt;
		    &amp;lt;coursecrn&amp;gt;&amp;lt;![CDATA[55164]]&amp;gt;&amp;lt;/coursecrn&amp;gt;
		    &amp;lt;coursetitle&amp;gt;&amp;lt;![CDATA[FinAcctingI:BasicFinStatements]]&amp;gt;&amp;lt;/coursetitle&amp;gt;
		    &amp;lt;courseinstructor&amp;gt;&amp;lt;![CDATA[ Singleton, L]]&amp;gt;&amp;lt;/courseinstructor&amp;gt;
		    &amp;lt;courselocation&amp;gt;&amp;lt;![CDATA[&amp;lt;A HREF=&amp;quot;http://www.gwu.edu/~map/building.cfm?BLDG=DUQUES&amp;quot; target=&amp;quot;_blank&amp;quot; &amp;gt;DUQUES&amp;lt;/a&amp;gt; 258]]&amp;gt;&amp;lt;/courselocation&amp;gt;
		    &amp;lt;coursedays&amp;gt;&amp;lt;![CDATA[MW 06:10PM - 09:05PM]]&amp;gt;&amp;lt;/coursedays&amp;gt;
		    &amp;lt;coursetime&amp;gt;&amp;lt;![CDATA[]]&amp;gt;&amp;lt;/coursetime&amp;gt;
		    &amp;lt;coursestatus&amp;gt;&amp;lt;![CDATA[OPEN]]&amp;gt;&amp;lt;/coursestatus&amp;gt;
		    &amp;lt;coursesection&amp;gt;&amp;lt;![CDATA[81]]&amp;gt;&amp;lt;/coursesection&amp;gt;
		    &amp;lt;coursecredit&amp;gt;&amp;lt;![CDATA[1.50  ]]&amp;gt;&amp;lt;/coursecredit&amp;gt;
		&amp;lt;/course&amp;gt;
		&amp;lt;course&amp;gt;
		    &amp;lt;coursedepartment&amp;gt;&amp;lt;![CDATA[ACCY]]&amp;gt;&amp;lt;/coursedepartment&amp;gt;
		    &amp;lt;coursenumber&amp;gt;&amp;lt;![CDATA[6102]]&amp;gt;&amp;lt;/coursenumber&amp;gt;
		    &amp;lt;coursecrn&amp;gt;&amp;lt;![CDATA[55165]]&amp;gt;&amp;lt;/coursecrn&amp;gt;
		    &amp;lt;coursetitle&amp;gt;&amp;lt;![CDATA[Fin Accting II: FinAcc Choices]]&amp;gt;&amp;lt;/coursetitle&amp;gt;
		    &amp;lt;courseinstructor&amp;gt;&amp;lt;![CDATA[ Tarpley, R]]&amp;gt;&amp;lt;/courseinstructor&amp;gt;
		    &amp;lt;courselocation&amp;gt;&amp;lt;![CDATA[&amp;lt;A HREF=&amp;quot;http://www.gwu.edu/~map/building.cfm?BLDG=DUQUES&amp;quot; target=&amp;quot;_blank&amp;quot; &amp;gt;DUQUES&amp;lt;/a&amp;gt; 258]]&amp;gt;&amp;lt;/courselocation&amp;gt;
		    &amp;lt;coursedays&amp;gt;&amp;lt;![CDATA[MW 06:10PM - 09:05PM]]&amp;gt;&amp;lt;/coursedays&amp;gt;
		    &amp;lt;coursetime&amp;gt;&amp;lt;![CDATA[]]&amp;gt;&amp;lt;/coursetime&amp;gt;
		    &amp;lt;coursestatus&amp;gt;&amp;lt;![CDATA[OPEN]]&amp;gt;&amp;lt;/coursestatus&amp;gt;
		    &amp;lt;coursesection&amp;gt;&amp;lt;![CDATA[80]]&amp;gt;&amp;lt;/coursesection&amp;gt;
		    &amp;lt;coursecredit&amp;gt;&amp;lt;![CDATA[1.50  ]]&amp;gt;&amp;lt;/coursecredit&amp;gt;
		&amp;lt;/course&amp;gt;
	&amp;lt;/courses&amp;gt;</code></pre>
</li>
</ol>

<h2 id='campus_map'>Campus Map</h2>

<ol>
<li>
<p>Categories 1. Endpoint 1. <code> http://citl.gwu.edu/iphonedev/maps/categories.xml </code> 2. Returns</p>

<pre><code>&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; standalone=&amp;quot;yes&amp;quot;?&amp;gt;
&amp;lt;categories xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&amp;gt;
	&amp;lt;category&amp;gt;
		&amp;lt;categoryId&amp;gt;1&amp;lt;/categoryId&amp;gt;
		&amp;lt;shortname&amp;gt;academic&amp;lt;/shortname&amp;gt;
		&amp;lt;categoryName&amp;gt;Academic&amp;lt;/categoryName&amp;gt;
		&amp;lt;state&amp;gt;Yes&amp;lt;/state&amp;gt;
	&amp;lt;/category&amp;gt;
	&amp;lt;category&amp;gt;
		&amp;lt;categoryId&amp;gt;2&amp;lt;/categoryId&amp;gt;
		&amp;lt;shortname&amp;gt;administrative&amp;lt;/shortname&amp;gt;
		&amp;lt;categoryName&amp;gt;Administrative&amp;lt;/categoryName&amp;gt;
		&amp;lt;state&amp;gt;Yes&amp;lt;/state&amp;gt;
	&amp;lt;/category&amp;gt;
&amp;lt;/categories&amp;gt;</code></pre>
</li>

<li>
<p>Buildings 1. Endpoint 1. <code>http://citl.gwu.edu/iphonedev/maps/[shortname].xml</code> 2. Returns</p>

<pre><code>&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot; standalone=&amp;quot;yes&amp;quot;?&amp;gt;
&amp;lt;buildings xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&amp;gt;
	&amp;lt;building&amp;gt;
		&amp;lt;buildingNumber&amp;gt;153&amp;lt;/buildingNumber&amp;gt;
		&amp;lt;campus&amp;gt;Foggy Bottom&amp;lt;/campus&amp;gt;
		&amp;lt;UsageClassification&amp;gt;Academic&amp;lt;/UsageClassification&amp;gt;
		&amp;lt;buildingName&amp;gt;1776 G St&amp;lt;/buildingName&amp;gt;
		&amp;lt;address&amp;gt;1776 G St&amp;lt;/address&amp;gt;
		&amp;lt;geoLocation&amp;gt;38.897984,-77.04146&amp;lt;/geoLocation&amp;gt;
		&amp;lt;shortname&amp;gt;NA&amp;lt;/shortname&amp;gt;
		&amp;lt;picturelink&amp;gt;http://www.gwu.edu/~newsctr/mobile/images/maps/1776-G-ST_UP_WLA_2010-6618.jpg&amp;lt;/picturelink&amp;gt;
	&amp;lt;/building&amp;gt;
	&amp;lt;building&amp;gt;
		&amp;lt;buildingNumber&amp;gt;136&amp;lt;/buildingNumber&amp;gt;
		&amp;lt;campus&amp;gt;Foggy Bottom&amp;lt;/campus&amp;gt;
		&amp;lt;UsageClassification&amp;gt;Academic&amp;lt;/UsageClassification&amp;gt;
		&amp;lt;buildingName&amp;gt;1957 E St&amp;lt;/buildingName&amp;gt;
		&amp;lt;address&amp;gt;1957 E St&amp;lt;/address&amp;gt;
		&amp;lt;geoLocation&amp;gt;38.896193,-77.044294&amp;lt;/geoLocation&amp;gt;
		&amp;lt;shortname&amp;gt;1957E&amp;lt;/shortname&amp;gt;
		&amp;lt;picturelink&amp;gt;http://www.gwu.edu/~newsctr/mobile/images/maps/Elliot_School_UP_WLA_2010-3102.jpg&amp;lt;/picturelink&amp;gt;
	&amp;lt;/building&amp;gt;
&amp;lt;/buildings&amp;gt;</code></pre>
</li>
</ol>

<h2 id='api_wrapper'>API Wrapper</h2>

<ol>
<li>
<p>Source class gw_api {</p>

<pre><code>	public function __construct() {

		//configuration settings
		$this-&amp;gt;user_agent = &#39;Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0 like Mac OS X; en-us) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A293 Safari/6531.22.7&#39;;
		$this-&amp;gt;maps_base = &#39;http://citl.gwu.edu/iphonedev/maps/&#39;;
		$this-&amp;gt;schedule_base = &#39;http://my.gwu.edu/mod/pws/scheduleXML.cfm&#39;;
	}

	public function get_url($url) {

		//prefer the WP HTTP API to allow for caching and user agent spoofing, fall back if necessary
		if ( function_exists( &#39;wp_remote_get&#39;) )
			$data = wp_remote_retrieve_body( wp_remote_get($url, array(&#39;user-agent&#39; =&amp;gt; $this-&amp;gt;user_agent) ) );
		else
			$data = file_get_contents($url);

		//parse the XML into a PHP object
		$xml = simplexml_load_string($data, &#39;SimpleXMLElement&#39;, LIBXML_NOCDATA);

		return $xml;
	}

	public function get_map($category = &#39;categories&#39;) {
		return $this-&amp;gt;get_url($this-&amp;gt;maps_base . $category . &#39;.xml&#39;);
	}

	public function get_schedule($year = &#39;&#39;, $term =&#39;&#39;, $dept = &#39;&#39;){

		//if no year was given, assume the current year
		if ($year == &#39;&#39;)
			$year = date(&#39;Y&#39;);

		//if no term is given, calculate the current term
		if ($term == &#39;&#39;)
			$term = $this-&amp;gt;get_term();

		//form URL and call
		return $this-&amp;gt;get_url($this-&amp;gt;schedule_base . &#39;?termCode=&#39; . $year . $term . &#39;&amp;amp;deptCode=&#39; . $dept);
	}

	public function get_term() {

		//get the current month as 01-12
		$m = date(&#39;M&#39;);

		//if it is jan. - april, we&#39;re in the spring
		if ($m &amp;lt; 5)
			return &#39;01&#39;;

		//if it&#39;s May - August, we&#39;re in the summer
		else if ($m &amp;lt; 9) {
			return &#39;02&#39;;
		}

		//otherwise, it&#39;s fall
		else return &#39;03&#39;;
	}

}</code></pre>
</li>

<li>
<p>Usage 1. Initialize $gwapi = new gw_api;</p>

<ol>
<li>
<p>List Departments $departments = $gwapi-&#62;get_schedule(); foreach ($departments as $department) echo $department-&#62;departmentname . &#8217;&#60;br /&#62;&#8217;;</p>
</li>

<li>
<p>Get Course Schedule for Fall 2011 $courses = $gwapi-&#62;get_schedule(&#8216;2011&#8217;,&#8217;03&#8217;,&#8217;ACCY&#8217;);</p>
</li>

<li>
<p>Get Course Schedule for current term $courses = $gwapi-&#62;get_schedule(null,null,&#8217;ACCY&#8217;);</p>
</li>

<li>
<p>Get map categories $categories = $gwapi-&#62;get_map();</p>
</li>

<li>
<p>Get Buildings $buildings = $gwapi-&#62;get_maps(&#8216;academic&#8217;);</p>
</li>
</ol>
</li>
</ol>

<p><span>Photo: <a href='http://www.flickr.com/photos/atomicbartbeans/1430289931/'>atomicbartbeans</a></span></p>
    </div>
    
    <div class="post-taxonomies">
  		Posted in 

<span class="term-list term-list-categories"><a href="http://localhost:4000/categories/#posts">posts</a></span> |
		Tagged 

<span class="term-list term-list-tags"><a href="http://localhost:4000/tags/#api">api</a>, <a href="http://localhost:4000/tags/#code">code</a>, <a href="http://localhost:4000/tags/#gw">gw</a>, <a href="http://localhost:4000/tags/#hack">hack</a>, <a href="http://localhost:4000/tags/#open source">open source</a></span>		
    </div>
</article>
		</div>
	</div>
</div>




     <footer>
        <p>&copy; Company 2012</p>
      </footer>
      
     </div><!--/.fluid-container-->
           
<!--	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="http://localhost:4000/javascript/jquery.js"><\/script>')</script>
	<script src="js/underscore.js"></script>
	<script src="js/backbone.js"></script>
	<script src="js/app.js"></script>
	<script src="http://localhost:4000/assets/js/js.js"></script> -->
	<script data-main="js/main.js" src="http://localhost:4000/js/libs/require/require.js"></script>
	<script>
	var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
	(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
	g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
	s.parentNode.insertBefore(g,s)}(document,'script'));
</script>
</body>
</html>
<!-- Generated 2012-09-04 23:34:58 -0400 -->